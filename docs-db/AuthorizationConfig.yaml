id: AuthorizationConfig
source_file: background-geolocation-types/src/core/config/AuthorizationConfig.ts
signature: export interface AuthorizationConfig {
categories:
- Config
description: |-
  Configure the SDK to authenticate with your server using an
  {@link AuthorizationConfig.accessToken | access token} (e.g., a
  [JSON Web Token](https://jwt.io/)), and automatically request new tokens when
  the server returns **`401 Unauthorized`**.

  **Note:** Only [JSON Web Token](https://jwt.io/) (JWT) is currently supported.

  The SDK automatically attaches your token to each HTTP request:

  ```txt
  Authorization: Bearer XXX.YYY.ZZZ
  ```

  When using {@link Config.authorization}, **do not** manually define
  `Authorization` inside {@link HttpConfig.headers}. The SDK manages all JWT
  headers automatically.

  If you supply {@link AuthorizationConfig.refreshUrl},
  {@link AuthorizationConfig.refreshToken}, and
  {@link AuthorizationConfig.refreshPayload}, the SDK can automatically refresh
  expired tokens when a `401 Unauthorized` response is received.

  **Configuration**

  @example example-1

  **Receiving responses from** {@link AuthorizationConfig.refreshUrl}

  Whenever the SDK receives a response from your
  {@link refreshUrl}, it fires
  {@link BackgroundGeolocation.onAuthorization}. Your callback will receive an
  {@link AuthorizationEvent}.

  - On **success**, {@link AuthorizationEvent.response} contains the parsed JSON.
  - On **error**, {@link AuthorizationEvent.error} contains the error message.

  @example example-2
examples:
  example-1:
    title: Example 1
    code:
      ts: |-
        const token = getMyToken(); // Your own JWT fetch method

        // Listen for authorization refresh results
        BackgroundGeolocation.onAuthorization((event) => {
          if (event.success) {
            console.log("[authorization] SUCCESS:", event.response);
          } else {
            console.log("[authorization] ERROR:", event.error);
          }
        });

        // Initialize with JWT authorization
        BackgroundGeolocation.ready({
          http: {
            url: "https://app.your.server.com/users/locations",
            autoSync: true,
          },
          authorization: {
            strategy: "JWT",
            accessToken: token.accessToken,
            refreshToken: token.refreshToken,
            refreshUrl: "https://auth.your.server.com/tokens",
            refreshPayload: {
              the_refresh_token_field_name: "{refreshToken}"
            },
            expires: token.expiresAt,
          }
        });
  example-2:
    title: Example 2
    code:
      ts: |-
        BackgroundGeolocation.onAuthorization((event) => {
          if (event.success) {
            console.log("[authorization] SUCCESS:", event.response);
          } else {
            console.log("[authorization] ERROR:", event.error);
          }
        });
